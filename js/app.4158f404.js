(function(e){function t(t){for(var r,a,s=t[0],u=t[1],c=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],r=!0,s=1;s<o.length;s++){var u=o[s];0!==n[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=o[0]))}return e}var r={},n={app:0},i=[];function a(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=r,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/black-books/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1c09":function(e,t,o){"use strict";var r=o("5c63"),n=o.n(r);n.a},"21bb":function(e,t,o){"use strict";var r=o("2dad"),n=o.n(r);n.a},"2dad":function(e,t,o){},"36d7":function(e,t,o){"use strict";var r=o("6517"),n=o.n(r);n.a},"3ed1":function(e,t,o){},4972:function(e,t,o){"use strict";var r=o("5f0a"),n=o.n(r);n.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("header",[o("div",{staticClass:"container"},[o("nav",[o("router-link",{attrs:{to:"/"}},[e._v("Home")]),o("router-link",{attrs:{to:"/book"}},[e._v("Books")]),o("router-link",{attrs:{to:"/about"}},[e._v("About")])],1),o("img",{attrs:{src:"https://res.cloudinary.com/dbfuiddgm/image/upload/v1602354594/black-books/logo2_wwfha2.jpg"}})])]),o("main",[o("notification"),o("router-view")],1)])},i=[],a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{directives:[{name:"show",rawName:"v-show",value:e.msg,expression:"msg"}],staticClass:"user-msg"},[o("b-alert",{staticClass:"position-fixed fixed-bottom m-0 rounded-0",staticStyle:{"z-index":"2000"},attrs:{variant:"success",dismissible:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[e._v(" "+e._s(e.msg)+" ")])],1)},s=[],u=o("5f5b"),c=new r["default"];r["default"].use(u["a"]);var l=c,d={data:function(){return{show:!1,msg:""}},created:function(){var e=this;l.$on("showMsg",(function(t){console.log("notify:",t),e.show=!0,e.msg=t,setTimeout((function(){e.show=!1}),3e3)}))},destroyed:function(){l.$off("showMsg")}},p=d,m=o("2877"),b=Object(m["a"])(p,a,s,!1,null,null,null),h=b.exports,g={components:{Notification:h}},f=g,v=Object(m["a"])(f,n,i,!1,null,null,null),k=v.exports,w=o("8c4f"),x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"home"},[e._m(0),o("div",{staticClass:"home-content"},[o("div",{staticClass:"flex space-between"},[o("h1",[e._v("Our books")]),o("div",{staticClass:"list-link"},[o("router-link",{attrs:{to:"/book"}},[e._v("See more")])],1)]),o("book-list",{attrs:{books:e.topBooks}})],1)])},y=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hero"},[o("p",[e._v("Welcome to Black Books")])])}],B=(o("96cf"),o("1da1")),C=(o("a4d3"),o("e01a"),o("c740"),o("d3b7"),{upload:_});function _(e){return R.apply(this,arguments)}function R(){return R=Object(B["a"])(regeneratorRuntime.mark((function e(t){var o,r,n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o="dbfuiddgm",r="https://api.cloudinary.com/v1_1/".concat(o,"/image/upload"),n=new FormData,n.append("file",t),n.append("upload_preset","black-books"),e.prev=5,e.next=8,fetch(r,{method:"POST",body:n});case 8:return i=e.sent,e.next=11,i.json();case 11:return a=e.sent,e.abrupt("return",a.secure_url);case 15:e.prev=15,e.t0=e["catch"](5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])}))),R.apply(this,arguments)}o("7db0"),o("4160"),o("a434"),o("159b");var S=o("2909"),O=(o("99af"),o("25f0"),{storeToStorage:q,loadFromStorage:j,getRandomInt:$,getRandomId:D,getFormattedDate:P});function q(e,t){localStorage.setItem(e,JSON.stringify(t)||null)}function j(e){var t=localStorage.getItem(e);return t?JSON.parse(t):void 0}function D(){var e=Date.now().toString(16),t=$(1e3,9999).toString(16),o=$(1e3,9999).toString(16);return"".concat(o,"-").concat(e,"-").concat(t).toUpperCase()}function $(e,t){var o=e>=t?e+1:t+1,r=e<=t?e:t;return Math.floor(Math.random()*(o-r))+r}function P(e){var t=new Date(e),o=new Intl.DateTimeFormat("en-US",{dateStyle:"short"}).format(t);return o}var T={query:E,get:L,delete:A,post:F,put:M,insert:J},I="id";function E(e){var t=O.loadFromStorage(e);return t||(t=[]),Promise.resolve(t)}function L(e,t){return N.apply(this,arguments)}function N(){return N=Object(B["a"])(regeneratorRuntime.mark((function e(t,o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return r=e.sent,e.abrupt("return",r.find((function(e){return e[I]===o})));case 4:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function A(e,t){return U.apply(this,arguments)}function U(){return U=Object(B["a"])(regeneratorRuntime.mark((function e(t,o){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:if(r=e.sent,n=r.findIndex((function(e){return e[I]===o})),-1!==n){e.next=6;break}throw new Error("something went wrong");case 6:return r.splice(n,1),O.storeToStorage(t,r),e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function F(e,t){return H.apply(this,arguments)}function H(){return H=Object(B["a"])(regeneratorRuntime.mark((function e(t,o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return r=e.sent,o[I]=O.getRandomId(),r.unshift(o),O.storeToStorage(t,r),e.abrupt("return",Promise.resolve(o));case 7:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function M(e,t){return G.apply(this,arguments)}function G(){return G=Object(B["a"])(regeneratorRuntime.mark((function e(t,o){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:if(r=e.sent,n=r.findIndex((function(e){return e[I]===o[I]})),-1!==n){e.next=6;break}throw new Error("something went wrong");case 6:return r[n]=o,O.storeToStorage(t,r),e.abrupt("return",Promise.resolve(o));case 9:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function J(e,t){return Y.apply(this,arguments)}function Y(){return Y=Object(B["a"])(regeneratorRuntime.mark((function e(t,o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,E(t);case 2:return r=e.sent,o.forEach((function(e){return e[I]=O.getRandomId()})),r.push.apply(r,Object(S["a"])(o)),O.storeToStorage(t,r),e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}var V="books",Z=[{id:"OXeMG8wNskc",title:"metus hendrerit",subtitle:"mi est eros convallis auctor arcu dapibus himenaeos",authors:["Barbara Cartland"],publishedDate:1999,description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",pageCount:713,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/20.jpg",language:"en",listPrice:{amount:109,currencyCode:"EUR",isOnSale:!1},reviews:[{id:"ewq1231dsaa",author:"John Doe",text:"A very good book",date:"2020-10-10",rating:5},{id:"uty8797634d",author:"Johnny Depp",text:"A very bad book",date:"2020-10-11",rating:1}]},{id:"JYOJa2NpSCq",title:"morbi",subtitle:"lorem euismod dictumst inceptos mi",authors:["Barbara Cartland"],publishedDate:1978,description:"aliquam pretium lorem laoreet etiam odio cubilia iaculis placerat aliquam tempor nisl auctor",pageCount:129,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/14.jpg",language:"sp",listPrice:{amount:44,currencyCode:"EUR",isOnSale:!0}},{id:"1y0Oqts35DQ",title:"at viverra venenatis",subtitle:"gravida libero facilisis rhoncus urna etiam",authors:["Dr. Seuss"],publishedDate:1999,description:"lorem molestie ut euismod ad quis mi ultricies nisl cursus suspendisse dui tempor sit suscipit metus etiam euismod tortor sagittis habitant",pageCount:972,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/2.jpg",language:"he",listPrice:{amount:108,currencyCode:"ILS",isOnSale:!1}},{id:"kSnfIJyikTP",title:"dictum",subtitle:"augue eu consectetur class curabitur conubia ligula in ullamcorper",authors:["Danielle Steel"],publishedDate:1978,description:"interdum inceptos mauris habitant primis neque tempus lacus morbi auctor cras consectetur euismod vehicula neque netus enim vivamus augue molestie imperdiet tincidunt aliquam",pageCount:303,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/16.jpg",language:"en",listPrice:{amount:19,currencyCode:"EUR",isOnSale:!0}},{id:"f4iuVmbuKCC",title:"sem himenaeos aptent",subtitle:"interdum per habitasse luctus purus est",authors:["Dr. Seuss"],publishedDate:2011,description:"et vehicula faucibus amet accumsan lectus cras nulla cubilia arcu neque litora mi habitasse quis amet augue facilisis sed",pageCount:337,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/12.jpg",language:"sp",listPrice:{amount:19,currencyCode:"USD",isOnSale:!1}},{id:"U2rfZO6oBZf",title:"mi ante posuere",subtitle:"sapien curae consectetur ultrices fringilla blandit ipsum curae faucibus",authors:["Leo Tolstoy"],publishedDate:1978,description:"senectus habitant nam imperdiet nostra elit dapibus nisl adipiscing in",pageCount:748,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/1.jpg",language:"en",listPrice:{amount:91,currencyCode:"USD",isOnSale:!0}},{id:"xI0wrXaaAcq",title:"non",subtitle:"leo tortor per dapibus mattis ut conubia porttitor ligula viverra",authors:["Leo Tolstoy"],publishedDate:2011,description:"nec scelerisque id cursus platea sit ullamcorper bibendum ultrices tempus ante mi aliquet cras tortor dapibus dictum scelerisque",pageCount:65,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/14.jpg",language:"he",listPrice:{amount:90,currencyCode:"USD",isOnSale:!1}},{id:"9laHCEdSpFy",title:"tristique",subtitle:"consectetur a eu tincidunt condimentum amet nisi",authors:["Dr. Seuss"],publishedDate:1999,description:"magna quisque venenatis laoreet purus in semper habitant proin pellentesque sed egestas cursus faucibus nam enim id sit mi ligula risus curabitur senectus curabitur sodales fames sem",pageCount:299,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/11.jpg",language:"he",listPrice:{amount:176,currencyCode:"EUR",isOnSale:!1}},{id:"nGhVwZvGCGp",title:"urna ornare gravida",subtitle:"sem vestibulum semper convallis pharetra tempor himenaeos ut",authors:["Jin Yong"],publishedDate:2011,description:"porttitor nisl sodales id eu tellus venenatis laoreet auctor dictumst nulla",pageCount:803,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/10.jpg",language:"sp",listPrice:{amount:116,currencyCode:"USD",isOnSale:!0}},{id:"Q8Q9Lsd03BD",title:"consequat neque volutpat",subtitle:"vel quis taciti fermentum feugiat ullamcorper curae praesent",authors:["Dr. Seuss"],publishedDate:1978,description:"curabitur bibendum in dolor neque magna phasellus arcu nulla cubilia senectus maecenas ullamcorper neque accumsan facilisis dictumst ornare",pageCount:891,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/5.jpg",language:"en",listPrice:{amount:145,currencyCode:"EUR",isOnSale:!1}},{id:"bd7a76kARao",title:"risus",subtitle:"pretium bibendum pharetra curabitur quisque dictumst",authors:["Danielle Steel"],publishedDate:2018,description:"auctor amet nostra luctus molestie proin platea cubilia netus sed purus egestas a primis eu tristique interdum litora lorem venenatis mattis senectus",pageCount:86,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/16.jpg",language:"sp",listPrice:{amount:157,currencyCode:"ILS",isOnSale:!0}},{id:"qKyG0vqeO3e",title:"interdum etiam vulputate",subtitle:"velit sapien eget tincidunt nunc tortor",authors:["Danielle Steel"],publishedDate:2018,description:"aenean mauris porta netus accumsan turpis etiam vestibulum vivamus sagittis nullam nec tellus quam mattis est pellentesque nisi litora sit ad",pageCount:882,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/17.jpg",language:"sp",listPrice:{amount:57,currencyCode:"USD",isOnSale:!0}},{id:"2RvT48ZNInj",title:"sagittis justo",subtitle:"etiam primis proin praesent placerat nisi fermentum nisi",authors:["Agatha Christie"],publishedDate:2011,description:"nec faucibus arcu suspendisse tempus potenti lobortis aliquam quisque augue integer consectetur etiam ultrices curabitur tristique metus",pageCount:598,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/8.jpg",language:"en",listPrice:{amount:167,currencyCode:"ILS",isOnSale:!1}},{id:"5z2s9pDXAYj",title:"quam ullamcorper himenaeos",subtitle:"ut placerat eu dapibus sapien sodales laoreet",authors:["Danielle Steel"],publishedDate:1999,description:"etiam nec aliquam euismod platea vel laoreet quisque condimentum sapien neque ut aliquam torquent in nam",pageCount:608,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/3.jpg",language:"he",listPrice:{amount:150,currencyCode:"USD",isOnSale:!0}},{id:"zBZu5cDEWha",title:"quis",subtitle:"suscipit turpis etiam turpis libero lobortis",authors:["Jin Yong"],publishedDate:2011,description:"etiam pretium urna fusce lobortis curae viverra aptent metus semper nisi litora feugiat elementum purus nunc consequat lorem ultricies non primis phasellus sociosqu donec dolor",pageCount:583,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/6.jpg",language:"en",listPrice:{amount:58,currencyCode:"ILS",isOnSale:!0}},{id:"aOI7tQuPZ2f",title:"aliquam aliquet dapibus",subtitle:"neque eu purus euismod placerat adipiscing odio egestas consequat",authors:["Leo Tolstoy"],publishedDate:2011,description:"dolor morbi malesuada eleifend purus taciti sit interdum aliquet commodo ut libero tincidunt",pageCount:497,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/7.jpg",language:"en",listPrice:{amount:78,currencyCode:"USD",isOnSale:!1}},{id:"WBooB82Uvwu",title:"class",subtitle:"elit enim ultricies amet imperdiet a molestie class elementum venenatis",authors:["Danielle Steel"],publishedDate:1999,description:"rhoncus odio netus consectetur aenean hendrerit massa scelerisque elementum aptent lobortis pharetra maecenas quam nulla volutpat turpis non habitasse aenean ante sodales lobortis quisque libero imperdiet gravida eleifend nulla",pageCount:804,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/10.jpg",language:"en",listPrice:{amount:118,currencyCode:"ILS",isOnSale:!1}},{id:"xm1z5bbZjlS",title:"vitae",subtitle:"class habitant at commodo semper ligula a bibendum",authors:["Leo Tolstoy"],publishedDate:1999,description:"himenaeos quis iaculis orci libero egestas quam varius primis erat lacus facilisis blandit dictum tristique interdum litora quisque purus senectus pretium purus",pageCount:231,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/12.jpg",language:"he",listPrice:{amount:60,currencyCode:"EUR",isOnSale:!1}},{id:"u3j6QIKLlJb",title:"rhoncus vivamus",subtitle:"nullam class risus amet senectus scelerisque etiam curabitur",authors:["Agatha Christie"],publishedDate:2020,description:"torquent in et id lacus vivamus aptent cursus erat integer venenatis risus ac ante quam etiam euismod feugiat risus suscipit rhoncus pharetra quisque felis",pageCount:652,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/20.jpg",language:"he",listPrice:{amount:110,currencyCode:"USD",isOnSale:!0}},{id:"vxYYYdVlEH3",title:"donec mi ullamcorper",subtitle:"varius malesuada augue molestie sollicitudin faucibus mi eu tempus",authors:["William Shakespeare","Roger Manners"],publishedDate:2011,description:"aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed aliquet euismod mi vivamus bibendum donec etiam quisque iaculis ullamcorper est sed",pageCount:904,categories:["Computers","Hack"],thumbnail:"http://coding-academy.org/books-photos/2.jpg",language:"sp",listPrice:{amount:186,currencyCode:"ILS",isOnSale:!0}}],z={query:Q,save:ee,get:K,remove:oe,getEmptyBook:ne,addReview:ie,formatGoogleBook:re,getPrevNext:se};function Q(){return W.apply(this,arguments)}function W(){return W=Object(B["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.query(V);case 2:if(t=e.sent,t&&t.length){e.next=7;break}return t=Z,e.next=7,T.insert(V,t);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function K(e){return X.apply(this,arguments)}function X(){return X=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.get(V,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.coverUploaded){e.next=4;break}return e.next=3,C.upload(t.coverUploaded);case 3:t.thumbnail=e.sent;case 4:if(!t.id){e.next=8;break}return e.abrupt("return",T.put(V,t));case 8:return e.abrupt("return",T.post(V,t));case 9:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function oe(e){return T.delete(V,e)}function re(e){var t=ne();return t.title=e.volumeInfo.title||"",t.subtitle=e.volumeInfo.subtitle||"",t.thumbnail=e.volumeInfo.imageLinks.thumbnail||"",t.authors=e.volumeInfo.authors||[],t.publishedDate=e.volumeInfo.publishedDate||"",t.description=e.volumeInfo.description||"",t.pageCount=e.volumeInfo.pageCount||null,t.categories=e.volumeInfo.categories||[],t.language=e.volumeInfo.language||"",t.listPrice={amount:20,currencyCode:"EUR",isOnSale:!1},t}function ne(){return{title:"",subtitle:"",thumbnail:"",coverUploaded:null,authors:[""],publishedDate:1999,description:"",pageCount:713,categories:[],language:"en",listPrice:{amount:0,currencyCode:"EUR",isOnSale:!1}}}function ie(e,t){return ae.apply(this,arguments)}function ae(){return ae=Object(B["a"])(regeneratorRuntime.mark((function e(t,o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:r=e.sent,r.reviews||(r.reviews=[]),o.id=O.getRandomId(),r.reviews.unshift(o),ee(r);case 7:case"end":return e.stop()}}),e)}))),ae.apply(this,arguments)}function se(e){return ue.apply(this,arguments)}function ue(){return ue=Object(B["a"])(regeneratorRuntime.mark((function e(t){var o,r,n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.query(V);case 2:return o=e.sent,r=o.findIndex((function(e){return e.id===t})),n=0===r?0:r-1,i=r===o.length-1?o.length-1:r+1,a={prev:o[n].id,next:o[i].id},e.abrupt("return",Promise.resolve(a));case 8:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}var ce=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"card-grid"},e._l(e.books,(function(t){return o("book-preview",{key:t.id,attrs:{book:t},nativeOn:{click:function(o){return e.clicked(t.id)}}})})),1)},le=[],de=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"book-card"},[o("b-card",{staticClass:"mb-2",attrs:{title:e.book.title,"img-alt":"Cover","img-top":"",tag:"article"}},[o("router-link",{attrs:{to:e.getBookLink}},[o("book-cover",{attrs:{book:e.book,imgClass:"card-img-top"}})],1),o("div",{staticClass:"card-text"},[o("book-authors",{attrs:{authors:e.book.authors}}),o("book-price",{attrs:{price:e.book.listPrice}})],1),o("div",{staticClass:"footer flex space-between"},[o("b-button",{on:{click:function(t){return e.$router.push("/book/"+e.book.id)}}},[e._v("Details")]),o("div",[o("b-button",{staticClass:"btn-edit",attrs:{variant:"outline"},on:{click:function(t){return e.$router.push("/book/edit/"+e.book.id)}}},[o("b-icon-pencil-square",{attrs:{"aria-label":"Edit",title:"Edit"}})],1),o("b-button",{attrs:{variant:"outline"},on:{click:function(t){return t.preventDefault(),function(){return e.deleteBook()}()}}},[o("b-icon-trash",{attrs:{"aria-label":"Delete",title:"Delete"}})],1)],1)],1)],1),o("b-modal",{attrs:{id:"modal",title:"Delete the book"},on:{ok:e.handleDelete},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[o("p",{staticClass:"my-4"},[e._v(e._s(e.getConfirmationText))])])],1)},pe=[],me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{className:"book-cover-container"}},[o("img",{class:e.imgClass,attrs:{src:e.book.thumbnail,alt:"Book cover"}}),e.book.listPrice.isOnSale?o("img",{staticClass:"onsale-overlay",attrs:{src:e.onSaleImg}}):e._e()])},be=[],he={props:["book","imgClass"],computed:{onSaleImg:function(){return o("6c82")}}},ge=he,fe=Object(m["a"])(ge,me,be,!1,null,null,null),ve=fe.exports,ke=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("h5",{staticClass:"card-title"},[e._v(e._s(e.title))])},we=[],xe={props:["title"]},ye=xe,Be=(o("1c09"),Object(m["a"])(ye,ke,we,!1,null,null,null)),Ce=Be.exports,_e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",[e._v(e._s(e.getAuthors))])},Re=[],Se=(o("a15b"),{props:["authors"],computed:{getAuthors:function(){return this.authors.length>1?this.authors.join(", "):this.authors[0]}}}),Oe=Se,qe=Object(m["a"])(Oe,_e,Re,!1,null,null,null),je=qe.exports,De=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",{class:e.getClassName},[e._v(e._s(e.getLocale))])},$e=[],Pe={props:["price"],computed:{getClassName:function(){var e=+this.price.amount;return e>150?"expensive":e<20?"cheep":""},getLocale:function(){return this.price.amount.toLocaleString("en-IN",{style:"currency",currency:this.price.currencyCode})}}},Te=Pe,Ie=(o("4972"),Object(m["a"])(Te,De,$e,!1,null,null,null)),Ee=Ie.exports,Le=o("7386"),Ne={data:function(){return{modalShow:!1}},props:["book"],created:function(){},components:{BookCover:ve,BookTitle:Ce,BookAuthors:je,BookPrice:Ee,BIconPencilSquare:Le["m"],BIconTrash:Le["s"]},computed:{getBookLink:function(){return"/book/".concat(this.book.id)},getConfirmationText:function(){return"Are you sure you want to delete ".concat(this.book.title,"?")}},methods:{deleteBook:function(){this.modalShow=!0},handleDelete:function(){this.$store.dispatch({type:"removeBook",id:this.book.id}),l.$emit("showMsg","".concat(this.book.title," was deleted"))}}},Ae=Ne,Ue=(o("c1bb"),Object(m["a"])(Ae,de,pe,!1,null,null,null)),Fe=Ue.exports,He={props:["books"],components:{BookPreview:Fe},methods:{clicked:function(e){this.$emit("selected",e)}}},Me=He,Ge=Object(m["a"])(Me,ce,le,!1,null,null,null),Je=Ge.exports,Ye={created:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadBooks();case 1:case"end":return t.stop()}}),t)})))()},methods:{loadBooks:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch({type:"loadBooks"});case 1:case"end":return t.stop()}}),t)})))()}},computed:{topBooks:function(){return this.$store.getters.topBooks}},components:{BookList:Je}},Ve=Ye,Ze=(o("21bb"),Object(m["a"])(Ve,x,y,!1,null,null,null)),ze=Ze.exports,Qe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container"},[o("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[o("b-row",{attrs:{"no-gutters":""}},[o("b-col",{attrs:{md:"6"}},[o("b-card-img",{staticClass:"rounded-20",attrs:{src:"https://res.cloudinary.com/dbfuiddgm/image/upload/v1602354596/black-books/about_cpixxl.jpg",alt:"Bernard Black"}})],1),o("b-col",{attrs:{md:"6"}},[o("b-card-body",[o("b-card-text",[e._v(" Bernard Black runs his own bookshop even though he doesn't much like people who buy books and hates having customers. Next door to Bernard's shop is the Nifty Gifty gift shop run by Fran, probably Bernard's only friend in the world. When Bernard's accountant goes on the run Bernard employs stress victim, Manny to help in his shop. This leads to a series of surreal adventures around the shop. ")]),o("transition",{attrs:{name:"fade"}},[e.isLinkShown?o("b-card-text",[o("small",{staticClass:"text-muted"},[e._v("See more on "),o("a",{attrs:{href:"https://www.imdb.com/title/tt0262150/",target:"_blank"}},[e._v("IMDB")])])]):e._e()],1)],1)],1)],1)],1)],1)},We=[],Ke={data:function(){return{isLinkShown:!0,interval:null}},created:function(){var e=this;this.interval=setInterval((function(){e.isLinkShown=!1}),5e3)},destroyed:function(){clearInterval(this.interval),this.interval=null}},Xe=Ke,et=Object(m["a"])(Xe,Qe,We,!1,null,null,null),tt=et.exports,ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container"},[o("book-filter",{on:{filtered:e.setFilter}}),o("div",{staticClass:"add-book-control flex column"},[o("label",[e._v("Add a book")]),o("b-form-select",{attrs:{options:e.addOptions},on:{input:e.optionSelected},model:{value:e.addOpton,callback:function(t){e.addOpton=t},expression:"addOpton"}})],1),e.booksToShow?o("book-list",{attrs:{books:e.booksToShow}}):o("div",[o("div",{staticClass:"spinner-border m-2",attrs:{role:"status"}},[o("span",{staticClass:"sr-only"},[e._v("Loading...")])])])],1)},rt=[],nt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"book-filter"},[o("h3",[e._v("Filter")]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.txt,expression:"filterBy.txt"}],attrs:{type:"text",placeholder:"Search a book"},domProps:{value:e.filterBy.txt},on:{input:[function(t){t.target.composing||e.$set(e.filterBy,"txt",t.target.value)},e.emitFilter]}})]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"priceRange"}},[e._v("Price filter")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.price,expression:"filterBy.price"}],staticClass:"form-control-range",attrs:{type:"range",max:"200",min:"100",id:"priceRange"},domProps:{value:e.filterBy.price},on:{input:e.emitFilter,__r:function(t){return e.$set(e.filterBy,"price",t.target.value)}}}),o("div",{staticClass:"row price-range-labels"},[o("span",[e._v("100")]),o("span",{staticClass:"priceFilterValue"},[e._v(e._s(e.filterBy.price))]),o("span",[e._v("200")])])])])},it=[],at={data:function(){return{filterBy:{txt:"",price:0}}},methods:{emitFilter:function(){this.$emit("filtered",this.filterBy)}}},st=at,ut=Object(m["a"])(st,nt,it,!1,null,null,null),ct=ut.exports,lt={data:function(){return{filterBy:{txt:"",price:0},addOpton:"",addOptions:[{value:"manually",text:"Manually"},{value:"google",text:"From Google books"}]}},created:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadBooks();case 1:case"end":return t.stop()}}),t)})))()},methods:{loadBooks:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.dispatch({type:"loadBooks"});case 1:case"end":return t.stop()}}),t)})))()},setFilter:function(e){this.$store.commit({type:"setBooksFilterBy",filterBy:e})},optionSelected:function(){"manually"===this.addOpton?this.$router.push("/book/edit"):"google"===this.addOpton&&this.$router.push("/book/add")}},computed:{booksToShow:function(){return this.$store.getters.booksToShow}},components:{BookList:Je,BookFilter:ct}},dt=lt,pt=Object(m["a"])(dt,ot,rt,!1,null,null,null),mt=pt.exports,bt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.book?o("section",{staticClass:"container"},[o("div",{staticClass:"card mb-3 book-details"},[o("div",{staticClass:"row no-gutters"},[o("div",{staticClass:"col-md-4"},[o("book-cover",{attrs:{book:e.book,imgClass:"card-img"}})],1),o("div",{staticClass:"col-md-8"},[o("div",{staticClass:"card-body"},[o("b-button-close",{on:{click:e.goBack}},[e._v("Go back")]),o("book-title",{attrs:{title:e.book.title}}),o("book-authors",{attrs:{authors:e.book.authors}}),o("book-price",{attrs:{price:e.book.listPrice}}),o("p",[e._v(e._s(e.book.subtitle))]),o("book-age",{attrs:{publishedDate:e.book.publishedDate}}),o("LongText",{attrs:{txt:e.book.description}}),o("book-page-count",{attrs:{pages:e.book.pageCount}}),o("p",[e._v("Categories: "+e._s(e.book.categories.join(", ")))]),o("p",[e._v("Language: "+e._s(e.book.language))]),e.book.listPrice.isOnSale?o("p",[e._v("On sale!")]):e._e(),o("div",{staticClass:"flex flex-end prevnext"},[o("button",{attrs:{disabled:e.isPrevDisabled},on:{click:e.goToPrev}},[e._v("Prev")]),o("button",{attrs:{disabled:e.isNextDisabled},on:{click:e.goToNext}},[e._v("Next")])])],1)])])]),o("div",{staticClass:"flex space-between"},[o("h4",[e._v("Reader reviews")]),o("router-link",{attrs:{to:"/book/"+e.book.id+"/addreview"}},[e._v("Add a review")])],1),o("router-view"),e.book.reviews?o("review-list",{attrs:{reviews:e.book.reviews},on:{deleteReview:e.deleteReview}}):e._e()],1):e._e()},ht=[],gt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",[e._v(" Published on "+e._s(e.publishedDate)+". "),o("u",[e._v(e._s(e.getBookAgeText))])])},ft=[],vt={props:["publishedDate"],computed:{getBookAgeText:function(){var e=+this.publishedDate,t=(new Date).getFullYear()-e;return t>10?"Veteran book":t<1?"New Book!":""}}},kt=vt,wt=Object(m["a"])(kt,gt,ft,!1,null,null,null),xt=wt.exports,yt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",{staticClass:"card-text description lead"},[e._v(" "+e._s(e.getTextToShow)+" "),o("button",{staticClass:"read-more-btn",on:{click:function(t){e.isLongTxtShown=!e.isLongTxtShown}}},[e._v(" "+e._s(e.getButtonText)+" ")])])},Bt=[],Ct=(o("498a"),{props:["txt"],data:function(){return{text:this.txt,isLongTxtShown:!1,maxLength:100}},computed:{getTextToShow:function(){var e=this.text;return e.length<=this.maxLength||this.isLongTxtShown?e:e.substr(0,this.maxLength).trim()+"..."},getButtonText:function(){return this.isLongTxtShown?"Less":"More"}}}),_t=Ct,Rt=Object(m["a"])(_t,yt,Bt,!1,null,null,null),St=Rt.exports,Ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",[e._v(e._s(e.pages)+" pages. "),o("u",[e._v(e._s(e.getPageCountText))])])},qt=[],jt={props:["pages"],computed:{getPageCountText:function(){var e=+this.pages;return e>500?"Long reading":e>200?"Decent reading":e<100?"Light reading":""}}},Dt=jt,$t=Object(m["a"])(Dt,Ot,qt,!1,null,null,null),Pt=$t.exports,Tt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"reviews-container flex column"},e._l(e.reviews,(function(t,r){return o("review-preview",{key:"review-"+r,attrs:{review:t},on:{deleteReview:e.deleteReview}})})),1)},It=[],Et=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-card",{staticClass:"review-preview soft-box shadow-box",attrs:{title:e.review.author,"sub-title":e.getDate}},[o("b-button-close",{on:{click:e.onDelete}}),o("b-card-text",[e._v(" "+e._s(e.review.rating)+" ")]),o("b-card-text",[e._v(" "+e._s(e.review.text)+" ")])],1)},Lt=[],Nt={props:["review"],computed:{getDate:function(){return O.getFormattedDate(this.review.date)}},methods:{onDelete:function(){this.$emit("deleteReview",this.review.id)}}},At=Nt,Ut=Object(m["a"])(At,Et,Lt,!1,null,null,null),Ft=Ut.exports,Ht={props:["reviews"],methods:{deleteReview:function(e){this.$emit("deleteReview",e)}},components:{ReviewPreview:Ft}},Mt=Ht,Gt=Object(m["a"])(Mt,Tt,It,!1,null,null,null),Jt=Gt.exports,Yt={data:function(){return{book:null,prevNext:{}}},computed:{isPrevDisabled:function(){return this.book.id===this.prevNext.prev},isNextDisabled:function(){return this.book.id===this.prevNext.next}},mounted:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.getters.books||e.$store.dispatch({type:"loadBooks"});case 1:case"end":return t.stop()}}),t)})))()},created:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateView();case 2:l.$on("reviewAdded",function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.addReview(e.book.id,o);case 2:l.$emit("showMsg","A review was added to ".concat(e.book.title)),e.updateView();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})))()},methods:{updateView:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.$route.params.id,t.next=3,e.$store.dispatch({type:"getBook",id:o});case 3:return e.book=t.sent,t.next=6,z.getPrevNext(e.book.id);case 6:e.prevNext=t.sent;case 7:case"end":return t.stop()}}),t)})))()},goBack:function(){this.$router.push("/book")},deleteReview:function(e){var t=this;return Object(B["a"])(regeneratorRuntime.mark((function o(){var r,n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=t.book.reviews.findIndex((function(t){return t.id===e})),t.book.reviews.splice(r,1),n=JSON.parse(JSON.stringify(t.book)),o.next=5,t.$store.dispatch({type:"saveBook",book:n});case 5:l.$emit("showMsg","A review was deleted from ".concat(t.book.title)),t.updateView();case 7:case"end":return o.stop()}}),o)})))()},goToNext:function(){this.$router.push("/book/".concat(this.prevNext.next))},goToPrev:function(){this.book.id!==this.prevNext.prev&&this.$router.push("/book/".concat(this.prevNext.prev))}},watch:{"$route.params.id":function(){this.updateView()}},components:{BookCover:ve,BookTitle:Ce,BookAuthors:je,BookPrice:Ee,BookAge:xt,LongText:St,BookPageCount:Pt,ReviewList:Jt}},Vt=Yt,Zt=Object(m["a"])(Vt,bt,ht,!1,null,null,null),zt=Zt.exports,Qt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container shadow-box padding-15"},[e.editBook?o("b-form",{on:{submit:function(t){return t.preventDefault(),e.addBook(t)},reset:e.onReset}},[o("b-button-close",{on:{click:function(t){return e.$router.push("/book")}}}),o("b-form-group",{attrs:{id:"title-group",label:"Book title","label-for":"title",description:"Book's title"}},[o("b-form-input",{attrs:{id:"title",type:"text",required:"",placeholder:"Title"},model:{value:e.editBook.title,callback:function(t){e.$set(e.editBook,"title",t)},expression:"editBook.title"}})],1),o("b-form-group",{attrs:{id:"subtitle-group",label:"Book subtitle","label-for":"subtitle",description:"Book's subtitle"}},[o("b-form-input",{attrs:{id:"subtitle",type:"text",placeholder:"Subtitle"},model:{value:e.editBook.subtitle,callback:function(t){e.$set(e.editBook,"subtitle",t)},expression:"editBook.subtitle"}})],1),o("b-form-group",{attrs:{id:"cover-group",label:"Book cover","label-for":"cover"}},[o("b-form-input",{attrs:{id:"thumbnail",type:"text",placeholder:"Thumbnail",readonly:""},model:{value:e.editBook.thumbnail,callback:function(t){e.$set(e.editBook,"thumbnail",t)},expression:"editBook.thumbnail"}}),o("b-form-file",{staticClass:"mt-3",attrs:{plain:""},model:{value:e.editBook.coverUploaded,callback:function(t){e.$set(e.editBook,"coverUploaded",t)},expression:"editBook.coverUploaded"}})],1),o("b-form-group",{staticClass:"author-input",attrs:{id:"authors-group",label:"Book author or authors","label-for":"Authors",description:"Book's authors"}},e._l(e.editBook.authors,(function(t,r){return o("div",{key:r,attrs:{author:t}},[o("b-form-input",{class:{single:r!==e.editBook.authors.length-1,withPlus:r===e.editBook.authors.length-1},attrs:{id:"author-"+r,type:"text",placeholder:"Author"},model:{value:e.editBook.authors[r],callback:function(t){e.$set(e.editBook.authors,r,t)},expression:"editBook.authors[ind]"}}),r===e.editBook.authors.length-1?o("b-button",{staticClass:"mb-2",attrs:{size:"md"},on:{click:function(t){return t.preventDefault(),e.editBook.authors.push("")}}},[o("b-icon-plus",{attrs:{"aria-label":"Add author"}})],1):e._e()],1)})),0),o("b-form-group",{attrs:{id:"price-group",label:"Book price","label-for":"price"}},[o("b-form-input",{attrs:{id:"price",required:"",placeholder:"Price"},model:{value:e.editBook.listPrice.amount,callback:function(t){e.$set(e.editBook.listPrice,"amount",t)},expression:"editBook.listPrice.amount"}})],1),o("b-button",{attrs:{type:"submit"}},[e._v(e._s(e.getButtonText))])],1):e._e()],1)},Wt=[],Kt={data:function(){return{editBook:null}},created:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.$route.params.id,t.next=3,e.$store.dispatch({type:"getBook",id:o});case 3:e.editBook=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{onReset:function(e){},addBook:function(){this.$store.dispatch({type:"saveBook",book:this.editBook}),l.$emit("showMsg","".concat(this.editBook.title," was saved")),this.$router.push("/book")}},computed:{getButtonText:function(){return this.editBook.id?"Edit":"Add"}},components:{BIconPlus:Le["o"]}},Xt=Kt,eo=(o("36d7"),Object(m["a"])(Xt,Qt,Wt,!1,null,null,null)),to=eo.exports,oo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.filterBy.txt,expression:"filterBy.txt"}],attrs:{type:"text",placeholder:"Search for a book"},domProps:{value:e.filterBy.txt},on:{input:[function(t){t.target.composing||e.$set(e.filterBy,"txt",t.target.value)},e.searchGoogle]}}),e.bookSuggestions?o("div",{staticClass:"suggestions"},e._l(e.bookSuggestions,(function(t){return o("div",{key:t.id,attrs:{item:t}},[e._v(" "+e._s(t.volumeInfo.title)+" "),o("b-button",{staticClass:"mb-2",attrs:{size:"sm"},on:{click:function(o){return o.preventDefault(),function(){return e.addGoogleBook(t)}()}}},[o("b-icon-plus",{attrs:{"aria-label":"Add book"}})],1)],1)})),0):e._e()])},ro=[],no=o("bc3a"),io="https://www.googleapis.com/books/v1/volumes?printType=books&q=";function ao(e){return so.apply(this,arguments)}function so(){return so=Object(B["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,no["get"](io+t).then((function(e){return e.data.items}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}var uo={searchGoogleBooks:ao},co={data:function(){return{filterBy:{txt:""},bookSuggestions:[]}},methods:{searchGoogle:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.filterBy.txt.length>=3)){t.next=4;break}return t.next=3,uo.searchGoogleBooks(e.filterBy.txt);case 3:e.bookSuggestions=t.sent;case 4:case"end":return t.stop()}}),t)})))()},addGoogleBook:function(e){var t=z.formatGoogleBook(e);this.$store.dispatch({type:"saveBook",book:t}),l.$emit("showMsg","".concat(t.title," was saved")),this.$router.push("/book")}},components:{BIconPlus:Le["o"]}},lo=co,po=Object(m["a"])(lo,oo,ro,!1,null,null,null),mo=po.exports,bo=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"container shadow-box padding-15"},[o("b-form",{on:{submit:function(t){return t.preventDefault(),e.addReview(t)},reset:function(t){return t.preventDefault(),e.onReset(t)}}},[o("b-button-close",{on:{click:e.onClose}}),o("b-form-group",{attrs:{id:"author-group",label:"Review author","label-for":"author",description:"Your name"}},[o("b-form-input",{attrs:{id:"author",type:"text",required:"",placeholder:"Book reviewer's name"},model:{value:e.newReview.author,callback:function(t){e.$set(e.newReview,"author",t)},expression:"newReview.author"}})],1),o("b-form-group",{attrs:{id:"text-group",label:"Review content","label-for":"text",description:"Review content"}},[o("b-form-textarea",{attrs:{id:"text",required:"",placeholder:"Your opinion of this book",rows:"3","max-rows":"6"},model:{value:e.newReview.text,callback:function(t){e.$set(e.newReview,"text",t)},expression:"newReview.text"}})],1),o("b-form-group",{staticClass:"book-rating",attrs:{id:"rating-group",label:"Your rating","label-for":"rating",description:"Book's rating"}},[o("b-form-rating",{attrs:{id:"rating",variant:"warning"},model:{value:e.newReview.rating,callback:function(t){e.$set(e.newReview,"rating",t)},expression:"newReview.rating"}})],1),o("b-form-group",{staticClass:"review-date",attrs:{id:"date",label:"Review date","label-for":"date"}},[o("b-form-datepicker",{attrs:{id:"date"},model:{value:e.newReview.date,callback:function(t){e.$set(e.newReview,"date",t)},expression:"newReview.date"}})],1),o("b-button",{attrs:{type:"submit"}},[e._v("Submit a review")])],1)],1)},ho=[],go={data:function(){return{bookId:"",newReview:{}}},computed:{},created:function(){this.newReview=this.getEmptyReview(),this.bookId=this.$route.params.id},methods:{getEmptyReview:function(){return{author:"",text:"",rating:0,date:new Date(Date.now())}},onClose:function(){this.$router.push("/book/".concat(this.bookId))},onReset:function(){this.newReview=this.getEmptyReview()},addReview:function(){this.newReview.date=new Date(this.newReview.date),l.$emit("reviewAdded",this.newReview),this.onClose()}}},fo=go,vo=Object(m["a"])(fo,bo,ho,!1,null,null,null),ko=vo.exports;r["default"].use(w["a"]);var wo=[{path:"/",name:"Home",component:ze},{path:"/about",name:"About",component:tt},{path:"/book",name:"Books",component:mt},{path:"/book/edit/:id?",component:to},{path:"/book/add",component:mo},{path:"/book/:id",component:zt,children:[{path:"/book/:id/addreview",component:ko}]}],xo=new w["a"]({routes:wo}),yo=xo,Bo=o("2f62"),Co=(o("4de4"),o("caad"),o("fb6a"),o("2532"),{state:{books:null,booksFilterBy:{txt:"",price:0},reviews:[]},getters:{books:function(e){return e.books},booksToShow:function(e){var t=e.books;if(""!==e.booksFilterBy.txt)return t.filter((function(t){return t.title.includes(e.booksFilterBy.txt)}));var o=+e.booksFilterBy.price;return o>0?t.filter((function(e){return e.listPrice.amount>o})):t},topBooks:function(e){var t=e.books;if(t)return t.slice(0,4)}},mutations:{setBooks:function(e,t){var o=t.books;e.books=o},removeBook:function(e,t){var o=t.id,r=e.books.findIndex((function(e){return e.id===o}));e.books.splice(r,1)},saveBook:function(e,t){var o=t.book,r=e.books.findIndex((function(e){return o.id===e.id}));-1===r?e.books.unshift(o):e.books.splice(r,1,o)},setBooksFilterBy:function(e,t){var o=t.filterBy;e.booksFilterBy=o}},actions:{loadBooks:function(e){setTimeout(Object(B["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z.query();case 2:o=t.sent,e.commit({type:"setBooks",books:o});case 4:case"end":return t.stop()}}),t)}))),1e3)},removeBook:function(e,t){return Object(B["a"])(regeneratorRuntime.mark((function o(){var r,n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=e.commit,n=t.id,o.next=4,z.remove(n);case 4:r({type:"removeBook",id:n});case 5:case"end":return o.stop()}}),o)})))()},saveBook:function(e,t){return Object(B["a"])(regeneratorRuntime.mark((function o(){var r,n,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=e.commit,n=t.book,o.next=4,z.save(n);case 4:return i=o.sent,r({type:"saveBook",book:i}),o.abrupt("return",i);case 7:case"end":return o.stop()}}),o)})))()},getBook:function(e,t){return Object(B["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.id,!o){e.next=7;break}return e.next=4,z.get(o);case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=z.getEmptyBook();case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))()}},modules:{}});r["default"].use(Bo["a"]);var _o=new Bo["a"].Store({strict:!0,state:{},getters:{},mutations:{},actions:{},modules:{bookModule:Co}});o("3ed1");r["default"].use(u["a"]),r["default"].config.productionTip=!1,new r["default"]({router:yo,store:_o,render:function(e){return e(k)}}).$mount("#app")},"5c63":function(e,t,o){},"5f0a":function(e,t,o){},6517:function(e,t,o){},"6c82":function(e,t,o){e.exports=o.p+"img/on_sale_overlay.6d0e1f5e.png"},b6f4:function(e,t,o){},c1bb:function(e,t,o){"use strict";var r=o("b6f4"),n=o.n(r);n.a}});
//# sourceMappingURL=app.4158f404.js.map